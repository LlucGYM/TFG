{"ast":null,"code":"import React, { useState, useContext } from 'react';\nimport { BehaviorSubject } from 'rxjs';\nimport Context from \"../Context/UserContextProvider\";\nconst currentUserSubject = new BehaviorSubject(JSON.parse(localStorage.getItem('currentUser')));\nexport const autenticationService = {\n  login,\n  logout,\n  currentUser: currentUserSubject.asObservable(),\n\n  get currentUserValue() {\n    return currentUserSubject.value;\n  }\n\n};\n\nfunction login(item) {\n  const cargoUtil = JSON.stringify(item);\n  alert(cargoUtil);\n  fetch(\"http://localhost/IniciaSessio.php\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": 'application/json'\n    },\n    body: cargoUtil\n  }).then(res => res.json()).then(user => {\n    localStorage.setItem('currentUser', JSON.stringify(user));\n    currentUserSubject.next(user);\n    return user;\n  });\n}\n\n;\n\nfunction logout() {\n  localStorage.removeItem('currentUser');\n}","map":{"version":3,"sources":["C:/Users/Lucas/OneDrive/Escritorio/TFG/Projecte/aplicacion/src/Servicio/autenticationservice.js"],"names":["React","useState","useContext","BehaviorSubject","Context","currentUserSubject","JSON","parse","localStorage","getItem","autenticationService","login","logout","currentUser","asObservable","currentUserValue","value","item","cargoUtil","stringify","alert","fetch","method","headers","body","then","res","json","user","setItem","next","removeItem"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,QAA0C,OAA1C;AACA,SAAQC,eAAR,QAA8B,MAA9B;AACA,OAAOC,OAAP,MAAoB,gCAApB;AAEC,MAAMC,kBAAkB,GAAG,IAAIF,eAAJ,CAAoBG,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAApB,CAA3B;AAEA,OAAO,MAAMC,oBAAoB,GAAG;AAClCC,EAAAA,KADkC;AAElCC,EAAAA,MAFkC;AAGhCC,EAAAA,WAAW,EAAER,kBAAkB,CAACS,YAAnB,EAHmB;;AAIhC,MAAIC,gBAAJ,GAAwB;AAAE,WAAOV,kBAAkB,CAACW,KAA1B;AAAiC;;AAJ3B,CAA7B;;AAOH,SAASL,KAAT,CAAeM,IAAf,EAAoB;AAChB,QAAMC,SAAS,GAAGZ,IAAI,CAACa,SAAL,CAAeF,IAAf,CAAlB;AACAG,EAAAA,KAAK,CAACF,SAAD,CAAL;AACAG,EAAAA,KAAK,CAAC,mCAAD,EAAqC;AACtCC,IAAAA,MAAM,EAAC,MAD+B;AAEtCC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX,KAF6B;AAKtCC,IAAAA,IAAI,EAAEN;AALgC,GAArC,CAAL,CAMGO,IANH,CAMQC,GAAG,IAAEA,GAAG,CAACC,IAAJ,EANb,EAOEF,IAPF,CAOQG,IAAD,IAAQ;AACXpB,IAAAA,YAAY,CAACqB,OAAb,CAAqB,aAArB,EAAoCvB,IAAI,CAACa,SAAL,CAAeS,IAAf,CAApC;AACAvB,IAAAA,kBAAkB,CAACyB,IAAnB,CAAwBF,IAAxB;AACJ,WAAOA,IAAP;AAAY,GAVZ;AAWF;;AAAA;;AAEF,SAAShB,MAAT,GAAiB;AACbJ,EAAAA,YAAY,CAACuB,UAAb,CAAwB,aAAxB;AACH","sourcesContent":["import React, {useState, useContext} from 'react';\r\nimport {BehaviorSubject} from 'rxjs';\r\nimport Context from \"../Context/UserContextProvider\";\r\n\r\n const currentUserSubject = new BehaviorSubject(JSON.parse(localStorage.getItem('currentUser')))\r\n\r\n export const autenticationService = {\r\n   login,\r\n   logout,\r\n     currentUser: currentUserSubject.asObservable(),\r\n     get currentUserValue () { return currentUserSubject.value }\r\n };\r\n\r\n     function login(item){\r\n         const cargoUtil = JSON.stringify(item);\r\n         alert(cargoUtil);\r\n         fetch(\"http://localhost/IniciaSessio.php\",{\r\n             method:\"POST\",\r\n             headers: {\r\n                 \"Content-Type\": 'application/json'\r\n             },\r\n             body: cargoUtil\r\n         }).then(res=>res.json()\r\n         ).then((user)=>{\r\n             localStorage.setItem('currentUser', JSON.stringify(user));\r\n             currentUserSubject.next(user);\r\n         return user}\r\n     )};\r\n\r\n     function logout(){\r\n         localStorage.removeItem('currentUser')\r\n     }"]},"metadata":{},"sourceType":"module"}